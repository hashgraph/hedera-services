#!/usr/bin/env bash

pcli diagram \
    -l 'applicationTransactionPrehandler:futures:consensusRoundHandler' \
    -l 'eventDurabilityNexus:wait for durability:consensusRoundHandler' \
    -s 'eventWindowManager:non-ancient event window:Ê˜' \
    -s 'heartbeat:heartbeat:â™¡' \
    -s 'eventCreationManager:non-validated events:$' \
    -s 'applicationTransactionPrehandler:futures:â˜…' \
    -s 'eventDurabilityNexus:wait for durability:ðŸ•‘' \
    -s 'pcesReplayer:done streaming pces:@' \
    -s 'inOrderLinker:events to gossip:g' \
    -s 'runningHashUpdate:running hash update:Â§' \
    -s 'getKeystoneEventSequenceNumber:flush request:Îž' \
    -s 'extractOldestMinimumGenerationOnDisk:minimum identifier to store:Î©' \
    -s 'pcesReplayer:events to hash:!' \
    -g 'Event Validation:internalEventValidator,eventDeduplicator,eventSignatureValidator' \
    -g 'Event Hashing:eventHasher,postHashCollector' \
    -g 'Orphan Buffer:orphanBuffer,orphanBufferSplitter' \
    -g 'Consensus Engine:consensusEngine,consensusEngineSplitter,eventWindowManager,getKeystoneEventSequenceNumber' \
    -g 'State File Management:saveToDiskFilter,signedStateFileManager,extractOldestMinimumGenerationOnDisk,toStateWrittenToDiskAction' \
    -g 'State Signature Collection:stateSignatureCollector,reservedStateSplitter,allStatesReserver,completeStateFilter,completeStatesReserver,extractConsensusSignatureTransactions,extractPreconsensusSignatureTransactions' \
    -g 'Preconsensus Event Stream:pcesSequencer,pcesWriter,eventDurabilityNexus,ðŸ•‘' \
    -g 'Consensus Event Stream:getEvents,eventStreamManager' \
    -g 'Consensus Pipeline:inOrderLinker,Consensus Engine,g,Ê˜,Îž' \
    -g 'Event Creation:futureEventBuffer,futureEventBufferSplitter,eventCreationManager,$' \
    -g 'Gossip:gossip,shadowgraph' \
    -g 'Iss Detector:extractSignaturesForIssDetector,issDetector,issNotificationSplitter' \
    -g 'Heartbeat:heartbeat,â™¡' \
    -g 'PCES Replay:pcesReplayer,@,!' \
    -g 'Transaction Prehandling:applicationTransactionPrehandler,â˜…' \
    -g 'Signature Management:State Signature Collection,stateSigner,Iss Detector' \
    -g 'State Modification:consensusRoundHandler,runningHashUpdate,Â§' \
    -c 'Consensus Event Stream' \
    -c 'Orphan Buffer' \
    -c 'Consensus Engine' \
    -c 'State Signature Collection' \
    -c 'State File Management'
